// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`HomeAssistant MQTT Message producer should generate corresponding discovery messages for given device in case of MiFlora Discovered availability message is given 1`] = `
[
  {
    "payload": "{"name":"Super Plant Temperature","device_class":"temperature","unit_of_measurement":"°C","object_id":"super_plant_temperature","unique_id":"super_plant_temperature","availability_topic":"a_base_topic/miflora/aa:bb/availability","availability_template":"{{ value_json.state }}","expire_after":30,"suggested_display_precision":2,"device":{"manufacturer":"Xiaomi Inc.","model":"MiFlora Plant Sensor HHCCJCV01","name":"miflora Super Plant","connections":[["mac","aa:bb"]]},"value_template":"{{ value_json.temperature | default('None') }}","state_topic":"a_base_topic/miflora/aa:bb/state"}",
    "retain": true,
    "topic": "homeassistant/sensor/super_plant_temperature/config",
  },
  {
    "payload": "{"name":"Super Plant Illuminance","device_class":"illuminance","unit_of_measurement":"lx","object_id":"super_plant_illuminance","unique_id":"super_plant_illuminance","availability_topic":"a_base_topic/miflora/aa:bb/availability","availability_template":"{{ value_json.state }}","expire_after":30,"suggested_display_precision":2,"device":{"manufacturer":"Xiaomi Inc.","model":"MiFlora Plant Sensor HHCCJCV01","name":"miflora Super Plant","connections":[["mac","aa:bb"]]},"value_template":"{{ value_json.illuminance | default('None') }}","state_topic":"a_base_topic/miflora/aa:bb/state"}",
    "retain": true,
    "topic": "homeassistant/sensor/super_plant_illuminance/config",
  },
  {
    "payload": "{"name":"Super Plant Soil Moisture","unit_of_measurement":"%","object_id":"super_plant_soil_moisture","unique_id":"super_plant_soil_moisture","availability_topic":"a_base_topic/miflora/aa:bb/availability","availability_template":"{{ value_json.state }}","expire_after":30,"suggested_display_precision":2,"icon":"mdi:water-percent","device":{"manufacturer":"Xiaomi Inc.","model":"MiFlora Plant Sensor HHCCJCV01","name":"miflora Super Plant","connections":[["mac","aa:bb"]]},"value_template":"{{ value_json.moisture | default('None') }}","state_topic":"a_base_topic/miflora/aa:bb/state"}",
    "retain": true,
    "topic": "homeassistant/sensor/super_plant_soil_moisture/config",
  },
  {
    "payload": "{"name":"Super Plant Soil Conductivity","unit_of_measurement":"µS/cm","object_id":"super_plant_soil_conductivity","unique_id":"super_plant_soil_conductivity","availability_topic":"a_base_topic/miflora/aa:bb/availability","availability_template":"{{ value_json.state }}","expire_after":30,"suggested_display_precision":2,"icon":"mdi:flower","device":{"manufacturer":"Xiaomi Inc.","model":"MiFlora Plant Sensor HHCCJCV01","name":"miflora Super Plant","connections":[["mac","aa:bb"]]},"value_template":"{{ value_json.soilConductivity | default('None') }}","state_topic":"a_base_topic/miflora/aa:bb/state"}",
    "retain": true,
    "topic": "homeassistant/sensor/super_plant_soil_conductivity/config",
  },
  {
    "payload": "{"state":"online"}",
    "retain": true,
    "topic": "a_base_topic/miflora/aa:bb/availability",
  },
]
`;

exports[`HomeAssistant MQTT Message producer should generate corresponding discovery messages for given device in case of MiFlora Offline availability message is given 1`] = `
[
  {
    "payload": "",
    "retain": true,
    "topic": "homeassistant/sensor/plant_temperature/config",
  },
  {
    "payload": "",
    "retain": true,
    "topic": "homeassistant/sensor/plant_illuminance/config",
  },
  {
    "payload": "",
    "retain": true,
    "topic": "homeassistant/sensor/plant_soil_moisture/config",
  },
  {
    "payload": "",
    "retain": true,
    "topic": "homeassistant/sensor/plant_soil_conductivity/config",
  },
  {
    "payload": "{"state":"offline"}",
    "retain": true,
    "topic": "a_base_topic/miflora/aa:bb/availability",
  },
]
`;

exports[`HomeAssistant MQTT Message producer should generate corresponding discovery messages for given device in case of RuuviTag Discovered availability message is given 1`] = `
[
  {
    "payload": "{"name":"My Fridge Absolute Humidity","unit_of_measurement":"g/m^3","object_id":"my_fridge_absolute_humidity","unique_id":"my_fridge_absolute_humidity","availability_topic":"a_base_topic/ruuvitag/aa:bb/availability","availability_template":"{{ value_json.state }}","expire_after":10,"suggested_display_precision":2,"icon":"mdi:water-percent","device":{"manufacturer":"Ruuvi Innovations Oy","model":"RuuviTag","name":"ruuvitag My Fridge","connections":[["mac","aa:bb"]]},"value_template":"{{ value_json.absoluteHumidity | default('None') }}","state_topic":"a_base_topic/ruuvitag/aa:bb/state"}",
    "retain": true,
    "topic": "homeassistant/sensor/my_fridge_absolute_humidity/config",
  },
  {
    "payload": "{"name":"My Fridge Temperature","device_class":"temperature","unit_of_measurement":"°C","object_id":"my_fridge_temperature","unique_id":"my_fridge_temperature","availability_topic":"a_base_topic/ruuvitag/aa:bb/availability","availability_template":"{{ value_json.state }}","expire_after":10,"suggested_display_precision":2,"device":{"manufacturer":"Ruuvi Innovations Oy","model":"RuuviTag","name":"ruuvitag My Fridge","connections":[["mac","aa:bb"]]},"value_template":"{{ value_json.temperature | default('None') }}","state_topic":"a_base_topic/ruuvitag/aa:bb/state"}",
    "retain": true,
    "topic": "homeassistant/sensor/my_fridge_temperature/config",
  },
  {
    "payload": "{"name":"My Fridge Battery Voltage","unit_of_measurement":"V","object_id":"my_fridge_battery_voltage","unique_id":"my_fridge_battery_voltage","availability_topic":"a_base_topic/ruuvitag/aa:bb/availability","availability_template":"{{ value_json.state }}","expire_after":10,"suggested_display_precision":2,"icon":"mdi:battery","device":{"manufacturer":"Ruuvi Innovations Oy","model":"RuuviTag","name":"ruuvitag My Fridge","connections":[["mac","aa:bb"]]},"value_template":"{{ value_json.batteryVoltage | default('None') }}","state_topic":"a_base_topic/ruuvitag/aa:bb/state"}",
    "retain": true,
    "topic": "homeassistant/sensor/my_fridge_battery_voltage/config",
  },
  {
    "payload": "{"name":"My Fridge Humidity","device_class":"humidity","unit_of_measurement":"%","object_id":"my_fridge_humidity","unique_id":"my_fridge_humidity","availability_topic":"a_base_topic/ruuvitag/aa:bb/availability","availability_template":"{{ value_json.state }}","expire_after":10,"suggested_display_precision":2,"icon":"mdi:water-percent","device":{"manufacturer":"Ruuvi Innovations Oy","model":"RuuviTag","name":"ruuvitag My Fridge","connections":[["mac","aa:bb"]]},"value_template":"{{ value_json.relativeHumidityPercentage | float(2) }}","state_topic":"a_base_topic/ruuvitag/aa:bb/state"}",
    "retain": true,
    "topic": "homeassistant/sensor/my_fridge_humidity/config",
  },
  {
    "payload": "{"name":"My Fridge Dew Point","unit_of_measurement":"°C","object_id":"my_fridge_dew_point","unique_id":"my_fridge_dew_point","availability_topic":"a_base_topic/ruuvitag/aa:bb/availability","availability_template":"{{ value_json.state }}","expire_after":10,"suggested_display_precision":2,"device":{"manufacturer":"Ruuvi Innovations Oy","model":"RuuviTag","name":"ruuvitag My Fridge","connections":[["mac","aa:bb"]]},"value_template":"{{ value_json.dewPoint | default('None') }}","state_topic":"a_base_topic/ruuvitag/aa:bb/state"}",
    "retain": true,
    "topic": "homeassistant/sensor/my_fridge_dew_point/config",
  },
  {
    "payload": "{"name":"My Fridge Pressure","device_class":"pressure","unit_of_measurement":"hPa","object_id":"my_fridge_pressure","unique_id":"my_fridge_pressure","availability_topic":"a_base_topic/ruuvitag/aa:bb/availability","availability_template":"{{ value_json.state }}","expire_after":10,"suggested_display_precision":2,"device":{"manufacturer":"Ruuvi Innovations Oy","model":"RuuviTag","name":"ruuvitag My Fridge","connections":[["mac","aa:bb"]]},"value_template":"{{ value_json.pressure | default('None') }}","state_topic":"a_base_topic/ruuvitag/aa:bb/state"}",
    "retain": true,
    "topic": "homeassistant/sensor/my_fridge_pressure/config",
  },
  {
    "payload": "{"name":"My Fridge TX Power","unit_of_measurement":"dBm","object_id":"my_fridge_txPower","unique_id":"my_fridge_txPower","availability_topic":"a_base_topic/ruuvitag/aa:bb/availability","availability_template":"{{ value_json.state }}","expire_after":10,"suggested_display_precision":2,"icon":"mdi:signal","device":{"manufacturer":"Ruuvi Innovations Oy","model":"RuuviTag","name":"ruuvitag My Fridge","connections":[["mac","aa:bb"]]},"value_template":"{{ value_json.txPower | default('None') }}","state_topic":"a_base_topic/ruuvitag/aa:bb/state"}",
    "retain": true,
    "topic": "homeassistant/sensor/my_fridge_txPower/config",
  },
  {
    "payload": "{"name":"My Fridge Acceleration X","unit_of_measurement":"mG","object_id":"my_fridge_acceleration_x","unique_id":"my_fridge_acceleration_x","availability_topic":"a_base_topic/ruuvitag/aa:bb/availability","availability_template":"{{ value_json.state }}","expire_after":10,"suggested_display_precision":2,"device":{"manufacturer":"Ruuvi Innovations Oy","model":"RuuviTag","name":"ruuvitag My Fridge","connections":[["mac","aa:bb"]]},"value_template":"{{ value_json.accelerationX | default('None') }}","state_topic":"a_base_topic/ruuvitag/aa:bb/state"}",
    "retain": true,
    "topic": "homeassistant/sensor/my_fridge_acceleration_x/config",
  },
  {
    "payload": "{"name":"My Fridge Acceleration Y","unit_of_measurement":"mG","object_id":"my_fridge_acceleration_y","unique_id":"my_fridge_acceleration_y","availability_topic":"a_base_topic/ruuvitag/aa:bb/availability","availability_template":"{{ value_json.state }}","expire_after":10,"suggested_display_precision":2,"device":{"manufacturer":"Ruuvi Innovations Oy","model":"RuuviTag","name":"ruuvitag My Fridge","connections":[["mac","aa:bb"]]},"value_template":"{{ value_json.accelerationY | default('None') }}","state_topic":"a_base_topic/ruuvitag/aa:bb/state"}",
    "retain": true,
    "topic": "homeassistant/sensor/my_fridge_acceleration_y/config",
  },
  {
    "payload": "{"name":"My Fridge Acceleration Z","unit_of_measurement":"mG","object_id":"my_fridge_acceleration_z","unique_id":"my_fridge_acceleration_z","availability_topic":"a_base_topic/ruuvitag/aa:bb/availability","availability_template":"{{ value_json.state }}","expire_after":10,"suggested_display_precision":2,"device":{"manufacturer":"Ruuvi Innovations Oy","model":"RuuviTag","name":"ruuvitag My Fridge","connections":[["mac","aa:bb"]]},"value_template":"{{ value_json.accelerationZ | default('None') }}","state_topic":"a_base_topic/ruuvitag/aa:bb/state"}",
    "retain": true,
    "topic": "homeassistant/sensor/my_fridge_acceleration_z/config",
  },
  {
    "payload": "{"name":"My Fridge Humidex","unit_of_measurement":"","object_id":"my_fridge_humidex","unique_id":"my_fridge_humidex","availability_topic":"a_base_topic/ruuvitag/aa:bb/availability","availability_template":"{{ value_json.state }}","expire_after":10,"suggested_display_precision":2,"device":{"manufacturer":"Ruuvi Innovations Oy","model":"RuuviTag","name":"ruuvitag My Fridge","connections":[["mac","aa:bb"]]},"value_template":"{{ value_json.humidex | default('None') }}","state_topic":"a_base_topic/ruuvitag/aa:bb/state"}",
    "retain": true,
    "topic": "homeassistant/sensor/my_fridge_humidex/config",
  },
  {
    "payload": "{"name":"My Fridge Heat Index","unit_of_measurement":"°C","object_id":"my_fridge_heat_index","unique_id":"my_fridge_heat_index","availability_topic":"a_base_topic/ruuvitag/aa:bb/availability","availability_template":"{{ value_json.state }}","expire_after":10,"suggested_display_precision":2,"device":{"manufacturer":"Ruuvi Innovations Oy","model":"RuuviTag","name":"ruuvitag My Fridge","connections":[["mac","aa:bb"]]},"value_template":"{{ value_json.heatIndex | default('None') }}","state_topic":"a_base_topic/ruuvitag/aa:bb/state"}",
    "retain": true,
    "topic": "homeassistant/sensor/my_fridge_heat_index/config",
  },
  {
    "payload": "{"name":"My Fridge Mac Address","unit_of_measurement":"","object_id":"my_fridge_mac_address","unique_id":"my_fridge_mac_address","availability_topic":"a_base_topic/ruuvitag/aa:bb/availability","availability_template":"{{ value_json.state }}","expire_after":10,"suggested_display_precision":2,"state_class":"None","device":{"manufacturer":"Ruuvi Innovations Oy","model":"RuuviTag","name":"ruuvitag My Fridge","connections":[["mac","aa:bb"]]},"value_template":"{{ value_json.macAddress | default('None') }}","state_topic":"a_base_topic/ruuvitag/aa:bb/state"}",
    "retain": true,
    "topic": "homeassistant/sensor/my_fridge_mac_address/config",
  },
  {
    "payload": "{"name":"My Fridge Measurement Sequence","unit_of_measurement":"","object_id":"my_fridge_measurement_sequence","unique_id":"my_fridge_measurement_sequence","availability_topic":"a_base_topic/ruuvitag/aa:bb/availability","availability_template":"{{ value_json.state }}","expire_after":10,"suggested_display_precision":2,"device":{"manufacturer":"Ruuvi Innovations Oy","model":"RuuviTag","name":"ruuvitag My Fridge","connections":[["mac","aa:bb"]]},"value_template":"{{ value_json.measurementSequence | default('None') }}","state_topic":"a_base_topic/ruuvitag/aa:bb/state"}",
    "retain": true,
    "topic": "homeassistant/sensor/my_fridge_measurement_sequence/config",
  },
  {
    "payload": "{"name":"My Fridge Movement Counter","unit_of_measurement":"","object_id":"my_fridge_movement_counter","unique_id":"my_fridge_movement_counter","availability_topic":"a_base_topic/ruuvitag/aa:bb/availability","availability_template":"{{ value_json.state }}","expire_after":10,"suggested_display_precision":2,"device":{"manufacturer":"Ruuvi Innovations Oy","model":"RuuviTag","name":"ruuvitag My Fridge","connections":[["mac","aa:bb"]]},"value_template":"{{ value_json.movementCounter | default('None') }}","state_topic":"a_base_topic/ruuvitag/aa:bb/state"}",
    "retain": true,
    "topic": "homeassistant/sensor/my_fridge_movement_counter/config",
  },
  {
    "payload": "{"name":"My Fridge Battery Percentage","device_class":"battery","unit_of_measurement":"%","object_id":"my_fridge_battery_percentage","unique_id":"my_fridge_battery_percentage","availability_topic":"a_base_topic/ruuvitag/aa:bb/availability","availability_template":"{{ value_json.state }}","expire_after":10,"suggested_display_precision":2,"icon":"mdi:battery","device":{"manufacturer":"Ruuvi Innovations Oy","model":"RuuviTag","name":"ruuvitag My Fridge","connections":[["mac","aa:bb"]]},"value_template":"\\n{% set temperature = value_json.temperature | float %}\\n{% set batteryVoltage = value_json.batteryVoltage | float %}\\n{% set maxBattery = 3 %}\\n{% set minBattery = iif(temperature < -20, 2, iif(temperature | float < 0, 2.3, 2.5)) %}\\n{{ (((batteryVoltage - minBattery) / (maxBattery - minBattery)) * 100) | round(2) }}\\n        ","state_topic":"a_base_topic/ruuvitag/aa:bb/state"}",
    "retain": true,
    "topic": "homeassistant/sensor/my_fridge_battery_percentage/config",
  },
  {
    "payload": "{"state":"online"}",
    "retain": true,
    "topic": "a_base_topic/ruuvitag/aa:bb/availability",
  },
]
`;

exports[`HomeAssistant MQTT Message producer should generate corresponding discovery messages for given device in case of RuuviTag Offline availability message is given 1`] = `
[
  {
    "payload": "",
    "retain": true,
    "topic": "homeassistant/sensor/fridge_absolute_humidity/config",
  },
  {
    "payload": "",
    "retain": true,
    "topic": "homeassistant/sensor/fridge_temperature/config",
  },
  {
    "payload": "",
    "retain": true,
    "topic": "homeassistant/sensor/fridge_battery_voltage/config",
  },
  {
    "payload": "",
    "retain": true,
    "topic": "homeassistant/sensor/fridge_humidity/config",
  },
  {
    "payload": "",
    "retain": true,
    "topic": "homeassistant/sensor/fridge_dew_point/config",
  },
  {
    "payload": "",
    "retain": true,
    "topic": "homeassistant/sensor/fridge_pressure/config",
  },
  {
    "payload": "",
    "retain": true,
    "topic": "homeassistant/sensor/fridge_txPower/config",
  },
  {
    "payload": "",
    "retain": true,
    "topic": "homeassistant/sensor/fridge_acceleration_x/config",
  },
  {
    "payload": "",
    "retain": true,
    "topic": "homeassistant/sensor/fridge_acceleration_y/config",
  },
  {
    "payload": "",
    "retain": true,
    "topic": "homeassistant/sensor/fridge_acceleration_z/config",
  },
  {
    "payload": "",
    "retain": true,
    "topic": "homeassistant/sensor/fridge_humidex/config",
  },
  {
    "payload": "",
    "retain": true,
    "topic": "homeassistant/sensor/fridge_heat_index/config",
  },
  {
    "payload": "",
    "retain": true,
    "topic": "homeassistant/sensor/fridge_mac_address/config",
  },
  {
    "payload": "",
    "retain": true,
    "topic": "homeassistant/sensor/fridge_measurement_sequence/config",
  },
  {
    "payload": "",
    "retain": true,
    "topic": "homeassistant/sensor/fridge_movement_counter/config",
  },
  {
    "payload": "",
    "retain": true,
    "topic": "homeassistant/sensor/fridge_battery_percentage/config",
  },
  {
    "payload": "{"state":"offline"}",
    "retain": true,
    "topic": "a_base_topic/ruuvitag/aa:bb/availability",
  },
]
`;
